// title
title Educational Management System

// define tables
users [icon: user, color: grey] {
  id integer pk
  nome text
  dtnasc integer
  genero text
  cep text
  endereco text
  telefone text
  email text
  cpf text
  role_id integer
}

roles [icon: briefcase, color: grey] {
  id integer pk
  nome text
}

students [icon: user-check, color: blue] {
  id integer pk
  user_id integer
  escola_id integer
  //EI, EF I., EF II., EM, EPT e ES
  etapa text
  serie text
  turma text
  turno text
  objetivos_educacionais text[]
  perfil_atendimento text
  num_bpc text
}

guardians [icon: users, color: grey] {
  id integer pk
  user_id integer
  aluno_id integer
  vinculo text
  telefone_alternativo text
  email_alternativo text
}

teachers [icon: user-tie, color: grey] {
  id integer pk
  user_id integer
  escola_id integer
  serie text
  turma text
  turno text
}

itinerant_teacher [icon: user-tie, color: grey ] {
  id integer pk
  user_id integer
  escola_id integer
}

support_staff [icon: user-plus, color: grey] {
  id integer pk
  user_id integer
  serie text
  turma text
  turno text
}

health_professionals [icon: user-md, color: red] {
  id integer pk
  user_id integer
  escola_id integer
  especializacao text
}

school_directors [icon: user-shield, color: brown] {
  id integer pk
  escola_id integer
}

educational_advisor [icon: user-shield, color: grey ] {
  id integer pk 
  user_id integer
  escola_id integer
}

learning_directors [icon: user-shield, color: brown] {
  id integer pk
  escola_id integer
  estado text
  municipio text
}

learning_coordenator [icon: user-graduate, color: pink] {
  id integer pk
  escola_id integer
}

school_secretaries [icon: user-edit, color: cyan] {
  id integer pk
  user_id integer
  cargo_governamental text
  numero_registro integer
}

learning_secretaries [icon: user-edit, color: cyan] {
  id integer pk
  user_id integer
  estado text
  municipio text
}

diagnostics [icon: file-medical, color: red] {
  id integer pk
  aluno_id integer
  perfil_id integer
  nome text
  cid text
  descricao text
}

reports [icon: file-alt, color: gray] {
  id integer pk
  aluno_id integer
  diagnostico_id integer
  imagem text
  verificado boolean
}

allergies [icon: exclamation-triangle, color: red] {
  id integer pk
  aluno_id integer
  tipo text
  medicacao text
}

sinals [icon: exclamation-triangle, color: red] {
  id integer pk
  aluno_id integer
  tipo text
  descricao text
}

solutions [icon: exclamation-triangle, color: red] {
  id integer pk
  aluno_id integer
  diagnostico_id integer
  perfil_id integer
  procedimento text
  descricao text
}

adaptations [icon: heartbeat, color: red] {
  id integer pk
  solucao_id integer
  nome text
  tipo text
  categoria text
  descricao text
}

medications [icon: heartbeat, color: red ] {
  id integer pk
  aluno_id integer
  tipo text
  descricao text
  receita text
  efeitos_colaterais text
}

limitations [icon: exclamation-triangle, color: red] {
  id integer pk
  aluno_id integer
  tipo text
  descricao text
}

health_care [icon: exclamation-triangle, color: red] {
  id integer pk
  aluno_id integer
  tipo text
  descricao text
}

perfil [icon: book-open, color: green] {
  id integer pk
  aluno_id integer
  data_elaboracao integer
}

features [icon: book-open, color: green ] {
  id integer pk
  perfil_id integer
  categoria text
  subcategoria text
  descricao text
  conteudo text[]
  tipo_conteudo text
}

documents [icon: book-open, color: green ] {
  id integer pk
  aluno_id integer
  adaptacao_id integer
  tipo text
  descricao text
  //Doc > URL > Cripto
  documento text
}

objetivos [icon: book-open, color: green ] {
  // Uma tabela que terá todos os objetivos existentes da plataforma, para que seja escolhido no objetivo especifico do aluno, referente a um componente curricular
  id integer pk
  codigo text
  descricao text
  curricular_id integer
}

general_objectives [icon: book-open, color: green ] {
  id integer pk
  aluno_id integer
  curriculo_id integer
  periodo text
  status text[]
}

specifics_objectives [icon: book-open, color: green ] {
  id integer pk 
  objetivos_id integer
  componente_curricular_id integer
  status text[]
}

curricular [icon: book-open, color: green ] {
  id integer pk
  serie text
  nome text
  categoria text
  descricao text
}

habilities [icon: book-open, color: green ] {
  // Habilidades Adquiridas em um componente curricular, ex: Matématica - Comparar 2 numeros
  id integer pk
  descricao text
  curricular_id integer  
}

area [icon: book-open, color: green ] {
  // Subcomponente do componente curricular, por exemplo, matématica - geometria
  id integer pk
  nome text
  curricular_id integer  
}

adaptations [icon: book-open, color: yellow ] {
  id integer pk 
  objetivo_id integer
  tipo text
  categoria text
  descricao text
}

curricular_adaptations [icon: book-open, color: yellow ] {
  id integer pk 
  adaptacao_id integer
}

conditions [icon: book-open, color: green] {
  id integer pk
  perfil_id integer
  aluno_id integer
  nome text
  tipo text
  descricao text
}

schools [icon: school, color: blue] {
  id integer pk
  nome text
  endereco text
  estado text
  municipio text
  cep text
}

//KPI's
  //Taxa de Preenchimento
  //Tempo medio de Preenchimento
  //Numero de Vezes de Atualizacao
  //Engajamento dos Professores
  //Percentual de Adequacao Curricular
  //Taxa de Adesao da Equipe Pedagogica
  //Percentual do Uso por Modulo
  //Percental de Participacao de Formulacao
  //Percentual de Conclusao de Trilha de Formacao

//OKR's
  //Percentual do PEI Completos - 80
  //Percentual de Formacao apos Periodo - 60
  //Percentual de Professores Ativos Mensais - 30
  //Percentual de Adequecoes Implementadas - 70
  //Estudos de Casos Implementados - 2


// define relationships
users.id > students.user_id
users.id > guardians.user_id
users.id > teachers.user_id
users.id > support_staff.user_id
users.id > health_professionals.user_id
users.id > school_secretaries.user_id
users.id > learning_secretaries.user_id
users.id < educational_advisor.user_id
users.id < itinerant_teacher.user_id

roles.id > users.role_id

students.id < guardians.aluno_id
students.id < diagnostics.aluno_id
students.id < students.aluno_id
students.id < perfil.aluno_id
students.id < activities.aluno_id
students.id < conditions.aluno_id
students.id < documents.aluno_id
students.id < general_objectives.aluno_id

diagnostics.id > reports.diagnostico_id
students.id < allergies.aluno_id
students.id < limitations.aluno_id
students.id < health_care.aluno_id
students.id < solutions.aluno_id
students.id < sinals.aluno_id
students.id < medications.aluno_id
solutions.diagnostico_id < diagnostics.id
solutions.id < adaptations.solucao_id
adaptations.id < documents.adaptacao_id


schools.id < students.escola_id
schools.id < teachers.escola_id
schools.id < school_directors.escola_id
schools.id < learning_directors.escola_id
schools.id < learning_coordenator.escola_id
schools.id < health_professionals.escola_id
schools.id < educational_advisor.escola_id
schools.id < itinerant_teacher.escola_id


perfil.id < features.perfil_id
perfil.id < conditions.perfil_id
perfil.id < diagnostics.perfil_id
perfil.id < solutions.perfil_id

general_objectives.id < specifics_objectives.objetivos_id
general_objectives.curriculo_id < curricular.id
specifics_objectives.id < curricular_adaptations.objetivo_id
specifics_objectives.componente_curricular_id - curricular.id
habilities.curricular_id > curricular.id
area.curricular_id > curricular.id
specifics_objectives.objetivo_id - objetivos.id
objetivos.curricular_id - curricular.id
adaptations.id > objetivos.id
curricular_adaptations.adaptacao_id - adaptations.id

courses.id < learning.curso_id
activities.id < learning.atividades_id
teachers.id < activities.professor_id
teachers.id < courses.professor_id
users.id > posts.user_id
users.id > notifications.user_id
users.id > certificates.user_id
courses.id > certificates.course_id

